#!/bin/sh
set -e

error_handler() {
  echo "\n\033[0;31mâœ— Commit aborted: One or more checks failed.\033[0m"
  echo "Check the output above for details. Fix the issues, then try committing again."
}
trap error_handler ERR

# Run linting, formatting, type checking, and unit tests
echo "Running lint/format..."
npx lint-staged

echo "Running TypeScript type check..."
npm run check:ts

echo "Running IaC Validation..."
npm run check:iac

echo "Running unit tests..."
npm run test:unit


exit 0