---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/structural/Hero.astro";
import Features from "../components/misc/Features.astro";
import Testimonials from "../components/misc/Testimonials.astro";
import Footer from "../components/structural/Footer.astro";
import Background from "../components/structural/Background.astro";
import SignUp from "../components/signup/SignUp.astro";
import Notifications from "../components/notifications/Notifications.astro";
import UserPreferences from "../components/signup/UserPreferences.astro";
import BetaBanner from "../components/structural/BetaBanner.astro";
import MessagePreview from "../components/misc/MessagePreview.astro";

// Define Open Graph metadata
const title =
	"TextNotifications.app - Timely Notifications about the events that matter to you";

const shortTitle = "Never Miss What Matters";
const description =
	"Timely Notifications about the events that matter to you, delivered straight to your phone via text message.";
---

<Layout 
  title={title}
  description={description}
>
  <Background>
    <BetaBanner />
    <div class="container mx-auto px-6 py-8 md:py-12 relative z-10">
      <Hero title={shortTitle} description={description} />
      
      <!-- Main content container with shared background -->
      <div class="mt-16 mb-24 p-4 max-w-2xl mx-auto bg-white/90 backdrop-blur-sm overflow-hidden">
        <!-- Features and Testimonials Section -->
        <div class="mb-16">
          <Features />
          <div class="mt-12">
            <Testimonials />
          </div>
        </div>

        <div>
          <form id="signup_form" hx-post={import.meta.env.PUBLIC_SIGNUP_API_URL} hx-target="#signup_form" hx-swap="outerHTML">
            <Notifications />
            <!-- Preferences section with preview -->
            <div class="flex flex-col gap-8 items-start">
              <div class="w-full">
                <UserPreferences />
              </div>
              <div class="w-full">
                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6">
                  <h3 class="text-xl font-semibold text-blue-900 mb-4">Message Preview</h3>
                  <p class="text-sm md:text-base text-slate-600 mb-6">Here's how your notifications will look based on your preferences:</p>
                  <MessagePreview />
                </div>
              </div>
            </div>
          
            <!-- Signup section -->
            <div class="w-full">
              <SignUp />
            </div>
          </form>
        </div>
      </div>
      
      <div class="max-w-2xl mx-auto">
        <Footer />
      </div>
    </div>
  </Background>
</Layout>